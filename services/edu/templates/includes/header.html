<header
    x-data="{ mobilenavOpen: false }"
    class="header-container"
>
    <div class="header-main">
        <logo>
            <a class="logo-link" href="/">
                <img class="logo-image" src="https://img.icons8.com/small/64/ffffff/fire-heart.png" />
                <span class="site-name">Awesome Shop </span>
            </a>
        </logo>
        <mobileicon class="mobile-icon">
            <a
                @click="mobilenavOpen = !mobilenavOpen"
                class="mobile-icon-btn"
            >
                <img
                    x-show="!mobilenavOpen"
                    class="menu-icon"
                    src="https://img.icons8.com/small/64/ffffff/menu.png"
                />
                <img
                    x-show="mobilenavOpen"
                    x-cloak
                    class="close-icon"
                    src="https://img.icons8.com/small/64/ffffff/delete-sign.png"
                />
            </a>
        </mobileicon>
    </div>
    <nav
        x-show="mobilenavOpen"
        x-cloak
        class="nav-container"
        x-transition:enter="transition-enter"
        x-transition:enter-start="transition-enter-start"
        x-transition:enter-end="transition-enter-end"
    >
        {% if request.user.is_authenticated %}
        <ul class="nav-items">
            <li><a href="/">Home</a></li>
            <li x-data="{ dropdownOpen: false }" class="user-dropdown">
                <a
                    @click="dropdownOpen = !dropdownOpen"
                    @click.away="dropdownOpen = false"
                    class="user-dropdown-link"
                >
                    <img
                        class="user-avatar"
                        src="https://pbs.twimg.com/profile_images/508601156767997952/fFTdKUf2_400x400.jpeg"
                    />
                    {{ user.username }}
                    <img
                        x-bind:class="dropdownOpen && 'rotate-180 duration-300'"
                        class="dropdown-arrow"
                        src="https://img.icons8.com/small/32/777777/expand-arrow.png"
                    />
                </a>
                <div
                    x-show="dropdownOpen"
                    x-cloak
                    class="dropdown-menu"
                    x-transition:enter="transition-enter"
                    x-transition:enter-start="transition-enter-start"
                    x-transition:enter-end="transition-enter-end"
                >
                    <ul class="dropdown-list">
                        {% comment %} <li><a href="{% url 'account:dashboard' %}">My Profile</a></li>
                        <li><a href="{% url 'account:edit' %}">Edit Profile</a></li> {% endcomment %}
                        <li>
                            <form id="logout-form" method="POST" action="{% url 'account_logout' %}">
                                {% csrf_token %}
                                <a href="#" onclick="document.getElementById('logout-form').submit()">Logout</a>
                            </form>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
        {% else %}
        <ul class="nav-items">
            <li><a href="/">Home</a></li>
            <li><a href="{% url 'account_login' %}">Login</a></li>
            <li><a href="{% url 'account_signup' %}">Register</a></li>
        </ul>
        {% endif %}
    </nav>
</header>
